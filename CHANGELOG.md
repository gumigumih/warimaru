# わりまる - リリースノート

## [v1.2.0] - 2024-12-01

### 🏗️ アーキテクチャ改善

#### ミニマムクリーンアーキテクチャの採用

- **UIとロジックの分離**: 計算・集計ロジックをdomain/usecasesに分離
- **外部依存の分離**: html2canvas等の外部ライブラリをinfrastructureに分離
- **型定義の整理**: domain/entities配下に型定義を集約
- **保守性向上**: コードの可読性と拡張性の大幅改善

#### ディレクトリ構成の改善

- **domain/**: 計算や集計など、UIに依存しない純粋なロジック
- **infrastructure/**: API通信やlocalStorageなど外部依存
- **store/**: ReduxやContextなどの状態管理
- **components/**: UI部品（Atomic Design準拠）

#### 開発ルールの整備

- **ARCHITECTURE.md**: ミニマムクリーンアーキテクチャの詳細ルール
- **GITHUB.md**: レビュープロセスにビルドチェックを追加
- **型安全性**: TypeScriptの型定義を強化

### 🔧 技術的改善

#### 計算ロジックの分離

- **calculatePayments.ts**: 合計金額、参加者数、1人あたり金額、最大支払額、支払い状況、送金計算を純粋関数として分離
- **PaymentGroup.ts**: エンティティの計算ロジックをusecase関数で統一
- **PersonPaymentForm.tsx**: 合計金額計算をusecase関数で統一

#### 外部依存の整理

- **html2canvas.ts**: 画像生成処理をinfrastructureに分離
- **型定義の統一**: readonly配列対応など型安全性の向上

### 📚 ドキュメント改善

- **開発ルール**: .cursor/rules/配下に詳細な開発ルールを整備
- **アーキテクチャ**: ミニマムクリーンアーキテクチャの実装方針を明記
- **レビュープロセス**: ビルドチェックを含むレビューフローを確立

---

## [v1.1.0] - 2024-12-01

### 🚀 メジャーアップデート

#### 人物数制限の撤廃

- **制限なし**: 人物の登録制限を 6 人から無制限に変更
- **名前生成**: A〜Z、AA〜ZZ... のように自動的に名前を生成
- **柔軟性向上**: 大規模なイベントでも対応可能

#### 参加者管理機能の追加

- **支払いをしていない人数**: 実際に支払いをした人とは別に参加者数を設定
- **正確な計算**: 総参加者数（支払いをした人 + 支払いをしていない人）で割り勘計算
- **使いやすさ**: 支払いをした人だけを登録すれば良い

#### 精算表示の改善

- **参加者別表示**: 支払いをしていない人も含めて精算方法を表示
- **グループ化表示**: 同じ条件の送金をまとめて表示
- **見やすいレイアウト**: 支払う人ごとに整理された表示
- **区切り線**: 異なる参加者の間に区切り線を表示

#### UI/UX の改善

- **入力フォームの統一**: すべての input フォームのスタイルを統一
- **レイアウト調整**: 支払いをしていない人数の入力欄を適切な位置に移動
- **視覚的改善**: 精算金額の表示をより見やすく整理

#### 画像保存機能の強化

- **ボーダー追加**: 画像保存時に精算金額のボックスにボーダーを追加
- **タイムスタンプ**: ファイル名に日時を自動追加（YYYYMMDD_HHMMSS 形式）
- **高品質**: より高解像度での画像保存

### 🔒 プライバシー・法的対応

#### プライバシーポリシーの追加

- **モーダル表示**: フッターの「プライバシー」リンクからモーダルで表示
- **詳細な内容**: データ収集、保存、第三者提供について明確に記載
- **ユーザーフレンドリー**: 見やすいレイアウトでプライバシー情報を提供
- **アクセス解析**: Google Analytics の使用について明記

#### ライセンス対応

- **MIT ライセンス**: プロジェクトに MIT ライセンスファイルを追加
- **オープンソース**: 商用利用可能なライセンスで公開
- **法的保護**: 適切な著作権表示と責任免除

### 🔧 技術的改善

#### 計算ロジックの最適化

- **正確性向上**: 支払いをしていない人も含めた正確な計算
- **パフォーマンス**: 効率的な送金計算アルゴリズム

#### コード品質の向上

- **TypeScript 対応**: 型安全性の向上
- **エラーハンドリング**: より堅牢なエラー処理
- **保守性**: コードの可読性と保守性の向上

#### UI/UX の改善

- **モーダルデザイン**: 美しいモーダル UI でプライバシーポリシーを表示
- **レスポンシブ対応**: モバイルデバイスでも見やすい表示
- **アクセシビリティ**: キーボード操作とスクリーンリーダー対応

---

## [v1.0.0] - 2024-12-01

### 🎉 初回リリース

わりまるは、飲み会やイベントでの割り勘計算を簡単に行える Web アプリケーションです。

### ✨ 基本機能

#### 人物管理

- 支払いをした人を登録・削除
- 人物数制限：6 人まで

#### 支払い入力

- 詳細モード：項目別に入力
- シンプルモード：合計金額のみ入力

#### 計算機能

- 1 人あたりの金額を自動計算
- 最適な送金方法を自動算出

#### 結果表示

- 支払い状況の視覚的表示
- 精算金額の表示

#### 画像保存

- 計算結果を画像として保存
- わりまるロゴ付き

### 🎨 UI/UX

- モダンなデザイン
- レスポンシブ対応
- キーボード操作対応

### 🔧 技術仕様

- React 18 + TypeScript
- Redux Toolkit
- Tailwind CSS
- FontAwesome
- Cleave.js
- html2canvas

---

**わりまる** - 簡単・正確な割り勘計算アプリ

https://warimaru.meggumi.com
